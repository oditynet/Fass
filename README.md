# FASS   - ПРОЕКТ В РАЗРАБОТКЕ

Робот на ардуино и сервоприводах с 2 степенями свободы.

# Теория:
Прямая и обратная кинематика:
<img src="https://github.com/oditynet/Fass/blob/main/dog/kinematic.png" title="example" width="800" />

Прямая кинематика - это зная импульсы найти координаты конечной точки X;Y.

Для первого плеча:

  - x1 = L1 * cos(a);
  - z1 = L1 * sin(a);
    
Для второго плеча. Знак минус потому что колено смотрит вниз и для получения второго угла надо из первого вычесть:

   - x = x1 + L2 * cos((a - b));
   - z = z1 + L2 * sin((a - b));

Обратная кинематика - это по координатам X;Y найти углы (импульсы двигателя). На графике нарисовано 4 возможных положения лапы и следовательно 4 разных способа вычисления. Угол t у нас всегда постоянный (равен 45.5744 градусов),т.к. сервопривод может крутиться от 0 до 180 граусов (130 - 600 импульсов) и для мотора эта прямая считается абсциссой. Для исследователя же абсциссой является прямая Х. Arduino работает с радианами (1 рад = 57.29577 градусов ) и по этому приходится переводить значения. 

Такая же кинематика и для движения лапы в сторону для поворота . разворота . хождения боком. Задача найти угол y_c и на какую высоту компнсировать подъем лапы на высоту z_H
<img src="https://github.com/oditynet/Fass/blob/main/dog/kinematic-side.png" title="example" width="800" />

Вот видео старой логики движения кинематики. Новая же работает очень точно и учитывает все возможные состояния.

<img src="https://github.com/oditynet/Fass/blob/main/leg.gif" title="leg" width="800" />

<img src="https://github.com/oditynet/Fass/blob/main/jostic/jostic-info.png" title="jostic" width="800" />

<img src="https://github.com/oditynet/Fass/blob/main/dog//fass.jpg" title="fass" width="800" />

Основные особенности реализации:
   1) Управление:
      - Радиоуправление через NRF24L01
      - Автоматический приоритет датчиков
   2) Алгоритмы движения:
       - Плавная ходьба вперед/назад
       - Повороты на месте
       - Автоматический возврат в нейтральное положение
       - Регулируемая скорость движения
   3) Обратная кинематика:
       - Точный расчет углов суставов
       - Учет конструктивных ограничений
       - Плавное перемещение ног
   4) Система безопасности:
       - Ограничители для сервоприводов
       - Плавные переходы между состояниями

Требования к аппаратному обеспечению:
   - Arduino nano
   - Модуль NRF24L01
   - PCA9685 (драйвер сервоприводов)
   - 12 сервоприводов (3 на каждую ногу)
   - MPU6050 (гироскоп/акселерометр)
   - 2 датчика HC-SR04 (ультразвуковые дальномеры)
   - Пульт управления с двумя джойстиками KY-023 и NRF24L01
   
origin project STL: https://novaspotmicro.com/parts-list.html c переработкой на метрическую систему и моим функционал.ПО написано с нуля, обратная кинематика разработана и написана с нуля. Алгоритм мой.
